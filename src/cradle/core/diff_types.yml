types:

- name: value_diff_op
  doc: ''
  schema:
    enum:
    - insert:
        doc: 'insert a field into a structure or an item into a array'
    - update:
        doc: 'update an existing structure field or array item'
    - delete:
        doc: 'delete a structure field or array item'

- name: value_diff_path
  doc: 'value_diff_path represents the path from the root of a dynamic value to
  the point where a change should be applied. Path elements can either be
  strings or positive integers. Strings represent structure field names.
  Integers represent array indices.'
  schema:
    array:
      element_schema:
        dynamic: {}

- name: value_diff_item
  doc: ''
  schema:
    structure:
    - path:
        doc: ''
        schema:
          named:
            app: cradle
            name: value_diff_path
    - op:
        doc: ''
        schema:
          named:
            app: cradle
            name: value_diff_op
    - a:
        doc: ''
        schema:
          optional:
            dynamic: {}
    - b:
        doc: ''
        schema:
          optional:
            dynamic: {}

- name: value_diff
  doc: ''
  schema:
    array:
      element_schema:
        named:
          app: cradle
          name: value_diff_item
