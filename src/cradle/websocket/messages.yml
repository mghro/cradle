imports:
  - 'cradle/thinknode/types'

types:

- name: websocket_registration_message
  doc: ''
  schema:
    structure:
    - name:
        doc: ''
        schema:
          string: {}
    - session:
        doc: ''
        schema:
          named:
            app: cradle
            name: thinknode_session

- name: websocket_test_query
  doc: ''
  schema:
    structure:
    - message:
        doc: ''
        schema:
          string: {}

- name: websocket_test_response
  doc: ''
  schema:
    structure:
    - name:
        doc: ''
        schema:
          string: {}
    - message:
        doc: ''
        schema:
          string: {}

- name: websocket_cache_insert
  doc: ''
  schema:
    structure:
    - key:
        doc: ''
        schema:
          string: {}
    - value:
        doc: ''
        schema:
          string: {}

- name: websocket_cache_response
  doc: ''
  schema:
    structure:
    - key:
        doc: ''
        schema:
          string: {}
    - value:
        doc: ''
        schema:
          optional:
            string: {}

- name: output_data_encoding
  doc: ''
  schema:
    enum:
    - yaml:
        doc: 'YAML'
    - diagnostic_yaml:
        doc: 'Diagnostic YAML - This is designed to be more human-friendly and will omit large values (like blobs) that seem meaningless to humans.'
    - msgpack:
        doc: 'MessagePack'
    - json:
        doc: 'JSON'

- name: input_data_encoding
  doc: ''
  schema:
    enum:
    - yaml:
        doc: 'YAML'
    - msgpack:
        doc: 'MessagePack'
    - json:
        doc: 'JSON'

<<<<<<< HEAD
- name: iss_object_request
=======
- name: get_iss_object_request
>>>>>>> origin
  doc: ''
  schema:
    structure:
    - context_id:
        doc: ''
        schema:
          string: {}
    - object_id:
        doc: ''
        schema:
          string: {}
    - ignore_upgrades:
        doc: ''
        schema:
          boolean: {}
    - encoding:
        doc: ''
        schema:
          named:
            app: cradle
            name: output_data_encoding

- name: iss_object_response
  doc: ''
  schema:
    structure:
    - object:
        doc: ''
        schema:
          blob: {}

- name: resolve_iss_object_request
  doc: ''
  schema:
    structure:
    - context_id:
        doc: ''
        schema:
          string: {}
    - object_id:
        doc: ''
        schema:
<<<<<<< HEAD
=======
          blob: {}

- name: resolve_iss_object_request
  doc: ''
  schema:
    structure:
    - request_id:
        doc: ''
        schema:
          string: {}
    - context_id:
        doc: ''
        schema:
          string: {}
    - object_id:
        doc: ''
        schema:
>>>>>>> origin
          string: {}
    - ignore_upgrades:
        doc: ''
        schema:
          boolean: {}
<<<<<<< HEAD
=======

- name: resolve_iss_object_response
  doc: ''
  schema:
    structure:
    - request_id:
        doc: ''
        schema:
          string: {}
    - immutable_id:
        doc: ''
        schema:
          string: {}
>>>>>>> origin

- name: resolve_iss_object_response
  doc: ''
  schema:
    structure:
    - immutable_id:
        doc: ''
        schema:
          string: {}

- name: iss_object_metadata_request
  doc: ''
  schema:
    structure:
    - context_id:
        doc: ''
        schema:
          string: {}
    - object_id:
        doc: ''
        schema:
          string: {}

- name: iss_object_metadata_response
  doc: ''
  schema:
    structure:
    - metadata:
        doc: ''
        schema:
          map:
            key_schema:
              string: {}
            value_schema:
              string: {}

- name: post_iss_object_request
  doc: ''
  schema:
    structure:
    - context_id:
        doc: ''
        schema:
          string: {}
    - schema:
        doc: ''
        schema:
          string: {}
    - encoding:
        doc: ''
        schema:
          named:
            app: cradle
            name: input_data_encoding
    - object:
        doc: ''
        schema:
          blob: {}

- name: post_iss_object_response
  doc: ''
  schema:
    structure:
    - object_id:
        doc: ''
        schema:
          string: {}

- name: copy_iss_object_request
  doc: ''
  schema:
    structure:
    - source_bucket:
        doc: ''
        schema:
          string: {}
    - destination_context_id:
        doc: ''
        schema:
          string: {}
    - object_id:
        doc: ''
        schema:
          string: {}

- name: post_calculation_request
  doc: ''
  schema:
    structure:
    - context_id:
        doc: ''
        schema:
          string: {}
    - calculation:
        doc: ''
        schema:
          named:
            app: cradle
            name: calculation_request

- name: post_calculation_response
  doc: ''
  schema:
    structure:
    - calculation_id:
        doc: ''
        schema:
          string: {}

- name: calculation_search_request
  doc: ''
  schema:
    structure:
    - context_id:
        doc: ''
        schema:
          string: {}
    - calculation_id:
        doc: ''
        schema:
          string: {}
    - search_string:
        doc: ''
        schema:
          string: {}

- name: calculation_search_response
  doc: ''
  schema:
    structure:
    - matches:
        doc: ''
        schema:
          array:
            element_schema:
              string: {}

- name: resolve_meta_chain_request
  doc: ''
  schema:
    structure:
    - context_id:
        doc: ''
        schema:
          string: {}
    - generator:
        doc: ''
        schema:
          named:
            app: cradle
            name: calculation_request

- name: resolve_meta_chain_response
  doc: ''
  schema:
    structure:
    - calculation_id:
        doc: ''
        schema:
          string: {}

- name: calculation_request_message
  doc: ''
  schema:
    structure:
    - context_id:
        doc: ''
        schema:
          string: {}
    - calculation_id:
        doc: ''
        schema:
          string: {}

- name: calculation_request_response
  doc: ''
  schema:
    structure:
    - calculation:
        doc: ''
        schema:
          named:
            app: cradle
            name: calculation_request

- name: client_message_content
  doc: ''
  schema:
    union:
    - kill:
        doc: ''
        schema:
          nil: {}
    - registration:
        doc: ''
        schema:
          named:
            app: cradle
            name: websocket_registration_message
    - test:
        doc: ''
        schema:
          named:
            app: cradle
            name: websocket_test_query
    - cache_insert:
        doc: ''
        schema:
          named:
            app: cradle
            name: websocket_cache_insert
    - cache_query:
        doc: ''
        schema:
          string: {}
    - iss_object:
        doc: ''
        schema:
          named:
            app: cradle
            name: iss_object_request
    - resolve_iss_object:
        doc: ''
        schema:
          named:
            app: cradle
<<<<<<< HEAD
            name: resolve_iss_object_request
    - iss_object_metadata:
=======
            name: get_iss_object_request
    - resolve_iss_object:
        doc: ''
        schema:
          named:
            app: cradle
            name: resolve_iss_object_request
    - get_iss_object_metadata:
>>>>>>> origin
        doc: ''
        schema:
          named:
            app: cradle
            name: iss_object_metadata_request
    - post_iss_object:
        doc: ''
        schema:
          named:
            app: cradle
            name: post_iss_object_request
    - copy_iss_object:
        doc: ''
        schema:
          named:
            app: cradle
            name: copy_iss_object_request
    - post_calculation:
        doc: ''
        schema:
          named:
            app: cradle
            name: post_calculation_request
    - resolve_meta_chain:
        doc: ''
        schema:
          named:
            app: cradle
            name: resolve_meta_chain_request
    - calculation_request:
        doc: ''
        schema:
          named:
            app: cradle
            name: calculation_request_message
    - calculation_search:
        doc: ''
        schema:
          named:
            app: cradle
            name: calculation_search_request

- name: websocket_client_message
  doc: ''
  schema:
    structure:
    - request_id:
        doc: ''
        schema:
          string: {}
    - content:
        doc: ''
        schema:
          named:
            app: cradle
            name: client_message_content

- name: server_message_content
  doc: ''
  schema:
    union:
    - test:
        doc: ''
        schema:
          named:
            app: cradle
            name: websocket_test_response
    - cache_response:
        doc: ''
        schema:
          named:
            app: cradle
            name: websocket_cache_response
    - error:
        doc: ''
        schema:
          string: {}
    - iss_object_response:
        doc: ''
        schema:
          named:
            app: cradle
            name: iss_object_response
    - resolve_iss_object_response:
        doc: ''
        schema:
          named:
            app: cradle
<<<<<<< HEAD
            name: resolve_iss_object_response
    - iss_object_metadata_response:
=======
            name: get_iss_object_response
    - resolve_iss_object_response:
        doc: ''
        schema:
          named:
            app: cradle
            name: resolve_iss_object_response
    - get_iss_object_metadata_response:
>>>>>>> origin
        doc: ''
        schema:
          named:
            app: cradle
            name: iss_object_metadata_response
    - post_iss_object_response:
        doc: ''
        schema:
          named:
            app: cradle
            name: post_iss_object_response
    - copy_iss_object_response:
        doc: ''
        schema:
          nil: {}
    - post_calculation_response:
        doc: ''
        schema:
          named:
            app: cradle
            name: post_calculation_response
    - resolve_meta_chain_response:
        doc: ''
        schema:
          named:
            app: cradle
            name: resolve_meta_chain_response
    - calculation_request_response:
        doc: ''
        schema:
          named:
            app: cradle
            name: calculation_request_response
    - calculation_search_response:
        doc: ''
        schema:
          named:
            app: cradle
            name: calculation_search_response

- name: websocket_server_message
  doc: ''
  schema:
    structure:
    - request_id:
        doc: ''
        schema:
          string: {}
    - content:
        doc: ''
        schema:
          named:
            app: cradle
            name: server_message_content
