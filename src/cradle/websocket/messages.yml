imports:
  - 'cradle/thinknode/types'

types:

- name: websocket_registration_message
  doc: ''
  schema:
    structure:
    - name:
        doc: ''
        schema:
          string: {}
    - session:
        doc: ''
        schema:
          named:
            app: cradle
            name: thinknode_session

- name: websocket_test_query
  doc: ''
  schema:
    structure:
    - message:
        doc: ''
        schema:
          string: {}

- name: websocket_test_response
  doc: ''
  schema:
    structure:
    - name:
        doc: ''
        schema:
          string: {}
    - message:
        doc: ''
        schema:
          string: {}

- name: websocket_cache_insert
  doc: ''
  schema:
    structure:
    - key:
        doc: ''
        schema:
          string: {}
    - value:
        doc: ''
        schema:
          string: {}

- name: websocket_cache_response
  doc: ''
  schema:
    structure:
    - key:
        doc: ''
        schema:
          string: {}
    - value:
        doc: ''
        schema:
          optional:
            string: {}

- name: get_iss_object_request
  doc: ''
  schema:
    structure:
    - request_id:
        doc: ''
        schema:
          string: {}
    - context_id:
        doc: ''
        schema:
          string: {}
    - object_id:
        doc: ''
        schema:
          string: {}
    - ignore_upgrades:
        doc: ''
        schema:
          boolean: {}

- name: get_iss_object_response
  doc: ''
  schema:
    structure:
    - request_id:
        doc: ''
        schema:
          string: {}
    - object:
        doc: ''
        schema:
          dynamic: {}

- name: post_iss_object_request
  doc: ''
  schema:
    structure:
    - request_id:
        doc: ''
        schema:
          string: {}
    - context_id:
        doc: ''
        schema:
          string: {}
    - schema:
        doc: ''
        schema:
          string: {}
    - object:
        doc: ''
        schema:
          dynamic: {}

- name: post_iss_object_response
  doc: ''
  schema:
    structure:
    - request_id:
        doc: ''
        schema:
          string: {}
    - object_id:
        doc: ''
        schema:
          string: {}

- name: post_calculation_request
  doc: ''
  schema:
    structure:
    - request_id:
        doc: ''
        schema:
          string: {}
    - context_id:
        doc: ''
        schema:
          string: {}
    - calculation:
        doc: ''
        schema:
          named:
            app: cradle
            name: calculation_request

- name: post_calculation_response
  doc: ''
  schema:
    structure:
    - request_id:
        doc: ''
        schema:
          string: {}
    - calculation_id:
        doc: ''
        schema:
          string: {}

- name: resolve_meta_chain_request
  doc: ''
  schema:
    structure:
    - request_id:
        doc: ''
        schema:
          string: {}
    - context_id:
        doc: ''
        schema:
          string: {}
    - generator:
        doc: ''
        schema:
          named:
            app: cradle
            name: calculation_request

- name: resolve_meta_chain_response
  doc: ''
  schema:
    structure:
    - request_id:
        doc: ''
        schema:
          string: {}
    - calculation_id:
        doc: ''
        schema:
          string: {}

- name: get_calculation_request_message
  doc: ''
  schema:
    structure:
    - request_id:
        doc: ''
        schema:
          string: {}
    - context_id:
        doc: ''
        schema:
          string: {}
    - calculation_id:
        doc: ''
        schema:
          string: {}

- name: get_calculation_request_response
  doc: ''
  schema:
    structure:
    - request_id:
        doc: ''
        schema:
          string: {}
    - calculation:
        doc: ''
        schema:
          named:
            app: cradle
            name: calculation_request

- name: websocket_client_message
  doc: ''
  schema:
    union:
    - kill:
        doc: ''
        schema:
          nil: {}
    - registration:
        doc: ''
        schema:
          named:
            app: cradle
            name: websocket_registration_message
    - test:
        doc: ''
        schema:
          named:
            app: cradle
            name: websocket_test_query
    - cache_insert:
        doc: ''
        schema:
          named:
            app: cradle
            name: websocket_cache_insert
    - cache_query:
        doc: ''
        schema:
          string: {}
    - get_iss_object:
        doc: ''
        schema:
          named:
            app: cradle
            name: get_iss_object_request
    - post_iss_object:
        doc: ''
        schema:
          named:
            app: cradle
            name: post_iss_object_request
    - post_calculation:
        doc: ''
        schema:
          named:
            app: cradle
            name: post_calculation_request
    - resolve_meta_chain:
        doc: ''
        schema:
          named:
            app: cradle
            name: resolve_meta_chain_request
    - get_calculation_request:
        doc: ''
        schema:
          named:
            app: cradle
            name: get_calculation_request_message

- name: websocket_server_message
  doc: ''
  schema:
    union:
    - test:
        doc: ''
        schema:
          named:
            app: cradle
            name: websocket_test_response
    - cache_response:
        doc: ''
        schema:
          named:
            app: cradle
            name: websocket_cache_response
    - error:
        doc: ''
        schema:
          string: {}
    - get_iss_object_response:
        doc: ''
        schema:
          named:
            app: cradle
            name: get_iss_object_response
    - post_iss_object_response:
        doc: ''
        schema:
          named:
            app: cradle
            name: post_iss_object_response
    - post_calculation_response:
        doc: ''
        schema:
          named:
            app: cradle
            name: post_calculation_response
    - resolve_meta_chain_response:
        doc: ''
        schema:
          named:
            app: cradle
            name: resolve_meta_chain_response
    - get_calculation_request_response:
        doc: ''
        schema:
          named:
            app: cradle
            name: get_calculation_request_response
