// #version:{{version}}#

// THIS FILE IS AUTOMATICALLY GENERATED! DO NOT EDIT!

{% import 'enums.j2' as enums %}
{% import 'structures.j2' as structures %}
{% import 'unions.j2' as unions %}

// If this file is included multiple times, this code is processed each time
// to clean out preprocessor definitions.

{% for type_id in type_schemas_definition_order(api.types).keys() %}
    {% with type_info = api.types[type_id] %}

    {% if union_tag(type_info.schema) == "structure_type" %}
{{structures.preprocessor_cleanup_code(type_info)}}
    {% elif union_tag(type_info.schema) == "enum_type" %}
{{enums.preprocessor_cleanup_code(type_info)}}
    {% elif union_tag(type_info.schema) == "union_type" %}
{{unions.preprocessor_cleanup_code(type_info)}}
    {% endif %}

    {% endwith %}
{% endfor %}

#ifndef {{app_name | upper}}_API_HPP
#define {{app_name | upper}}_API_HPP

#include <cradle/core/type_definitions.hpp>

namespace {{app_name}} {

{% for _, type_info in api.types.items() %}
    {% if union_tag(type_info.schema) == "structure_type" %}
{{structures.forward_declaration_code(type_info)}}
    {% elif union_tag(type_info.schema) == "enum_type" %}
{{enums.forward_declaration_code(type_info)}}
    {% elif union_tag(type_info.schema) == "union_type" %}
{{unions.forward_declaration_code(type_info)}}
    {% endif %}
{% endfor %}

{% for type_id in type_schemas_definition_order(api.types).keys() %}
    {% with type_info = api.types[type_id] %}

// {{type_info.name}}

    {% if type_info.description %}
{{type_info.description | format_comment}}
    {% endif %}

    {% if union_tag(type_info.schema) == "structure_type" %}
{{structures.hpp_definition_code(type_info)}}
    {% elif union_tag(type_info.schema) == "enum_type" %}
{{enums.hpp_definition_code(type_info)}}
    {% elif union_tag(type_info.schema) == "union_type" %}
{{unions.hpp_definition_code(type_info)}}
    {% endif %}

    {% endwith %}
{% endfor %}

}

#endif
